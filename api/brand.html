<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
<div class="container-fluid" ng-controller="navCtrl">


<div ng-repeat="event in xlist|limitTo:5">
<div itemscope itemtype="http://schema.org/EducationEvent"> 
<!-- meta muss wahrsch. in head -> head wird in index ausgeführt weil gesamt brand in div liegt -> keine xlist in index verfügbar: Entweder ohne meta itemprop an sidebar binden oder sidebar in requesthandler vorsortieren Außerdem ISO´s prüfen-->
 <meta itemprop="startDate" content="{{event.start_date}}"/>
 <meta itemprop="endDate" content="{{event.finish_date}}"/>
 <meta itemprop="location" content="{{event.location}} ({{event.eventgarantiestatus}})"/>
 <meta itemprop="name" content="{{event.name}}"/>
 <!-- URL notwendig? (hoher Aufwand)-->
 <!-- <meta itemprop="url" content="https://www.mitsm.de/kursname" />
 <a href="https://www.mitsm.de/kursname" target="_self"></a> -->
</div> 
</div>





<!--  <div class="row">
  <div class="col-md-12" id="header">
   <div class="well well-lg well_darkgrey">
    <img src="/EduMS-client/images/ihrLogo.png" alt="Ihr Logo">
   </div>
  </div>
 </div> -->

  <div class="row" >
   <!----content & sidebar-->
   <div class="col-md-8" id="container-content" >
    <div class="tabbable" id="tabs-sidebar">
     <ul class="nav nav-tabs well">

      <li class="active">
       <a href="#" data-toggle="tab" data-target="#panel-brand,#panel-brand-sidebar">
        <i class="fa fa-university"></i>
       </a>
      </li>

      <li ng-repeat="topic in topics">
       <a href="#" ng-click="tablesearchchange(topic.topic_name_raw)" data-toggle="tab" 
       data-target="#panel-{{topic.topic_name}},#panel-{{topic.topic_name}}-sidebar">{{topic.topic_name_raw}}</a>
      </li>
      <li class="pull-right">
       <a href="#" data-toggle="tab" data-target="#panel-sonstiges,#panel-sonstiges-sidebar">sonstiges</a>
      </li>
      <li class="pull-right">
       <a href="#" data-toggle="tab" data-target="#panel-standort,#panel-standort-sidebar"><i class="fa fa-location-arrow"></i> Standorte</a>
      </li>
      <li class="pull-right">
       <a href="#" data-toggle="tab" data-target="#panel-preis,#panel-preis-sidebar"><i class="fa fa-eur"></i> Preise</a>
      </li>
     </ul>


     <div class="tab-content">
     <div class="tab-pane active" id="panel-brand"><div ng-bind-html="brandinfo.brandDescription"></div></div>      
      <div ng-repeat="topicpanel in topics" class="tab-pane" id="panel-{{topicpanel.topic_name}}">
       <div class="col-md-12 well well-lg">
       <h2>{{topicpanel.topicHeadline}}</h2>
       <div ng-bind-html="topicpanel.topicDescription"></div>
       <div ng-bind-html="topicpanel.topicImage"></div>
        <nav class="navbar navbar-default">
         <div class="container-fluid">
          <course-list ng-repeat="panelcourse in topicpanel.courseList | orderBy:'+rank'| orderBy:'+level'"></course-list>

          <table class="table table-responsive table-hover table-striped" style="width: 66%;">
            <thead>
                <th><a href="#"><h4>Kurs</h4></a></th>
                <th><a href="#"><h4>Preis</h4></a></th>
                <th><a href="#"><h4>Preis Brutto</h4></a></th>
              </thead>
              <tbody>
                <tr ng-repeat="courseprice in topicpanel.courseList">
                  <td>{{courseprice.course_name}}</td>
                  <td>{{courseprice.coursePrice}},- €</td>
                  <td>{{courseprice.brutto}},- €</td>
                </tr>
              </tbody>
          </table>

         </div>
        </nav>
       </div>
      </div>
      
      <div class="tab-pane" id="panel-preis">
       <h2>Einzelpreise und Pakete</h2>

       <div ng-repeat="pricetopic in pricelist" class="tab-pane" >
        <div class="col-md-12 well well-lg" ng-repeat="lvl in pricetopic" ng-if="lvl.length > 0">
         <div ng-repeat="courseprice in lvl">
         <h3><font color="#660000"><b>name: {{courseprice.name}}</b></font></h3>
         <h4>|{{courseprice.level}}|{{courseprice.rank}}| <small class="text-success"> - {{courseprice.price}},00 € -</small></h4>
         <h4>Is test? {{courseprice.test}} OR belogs to Test: {{courseprice.test_id}} </h4>
         <h4>Belongs to topic: {{courseprice.topic}}</h4>
         <h4>-</h4>         
         </div>
         <hr>         
         <h4 class="text-success">Summe: {{lvl.price}},00 €</h4>
        </div>
       </div>


       <!-- <ul class="list-group">
        Preise Auflistung: course1-n(lt. level&order)+ course.prüfung = summe
         <li class="list-group-item" ng-repeat="course in courses | orderBy:['level','rank']">
         <h2><font color="#660000"><b>{{course.course_name}} |isTest? {{course.test}} |hat TestId? {{course.test_id}}</b></font><small class="text-success"> - {{course.coursePrice}},00 € -</small></h2>
        <div ng-bind-html="course.courseDescription"></div>
         </li>
       </ul>  -->     
      </div>

      <div class="tab-pane" id="panel-standort">
       <p>Standortbeschreibung aus EduMS und dazugehörige Termine</p>
        <div ng-repeat="loc in location">        
         <h2><font color="#660000"><b>{{loc.name}} ~ </b><span class="badge">Teilnehmerkapazität: {{loc.locationMaxPart}} Personen</span></font></h2>   
         <div  ng-bind-html="loc.description"></div>           
        <div class="progress">
         <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: {{loc.width}}%;">
        </div>
       </div>       
       </table>
       </div>       
      </div>

      <div class="tab-pane" id="panel-sonstiges">
       <div class="panel-group" id="panel-493447">
        <div class="panel panel-default">
         <div class="panel-heading">
          <a class="panel-title collapsed" data-toggle="collapse"
           data-parent="#panel-497725" href="#panel-element-9675257"><span
           class="badge">1</span> SchulungsAGB</a>
         </div>
         <div id="panel-element-9675257" class="panel-collapse collapse">
          <div class="panel-body">
           <div class="container-fluid">
            <div class="row">
             <agb></agb>
            </div>
           </div>
          </div>
         </div>
        </div>

        <div class="panel panel-default">
         <div class="panel-heading">
          <a class="panel-title collapsed" data-toggle="collapse"
           data-parent="#panel-493447" href="#panel-element-678923"><span
           class="badge">2</span> Datenschutzerklärung</a>
         </div>
         <div id="panel-element-678923" class="panel-collapse collapse">
          <div class="panel-body">
           <div class="container-fluid">
            <div class="row">
             <datenschutzerklaerung></datenschutzerklaerung>
            </div>
           </div>
          </div>
         </div>
        </div>

        <div class="panel panel-default">
         <div class="panel-heading">
          <a class="panel-title collapsed" data-toggle="collapse"
           data-parent="#panel-493447" href="#panel-element-236342874"><span
           class="badge">3</span> Impressum</a>
         </div>
         <div id="panel-element-236342874"
          class="panel-collapse collapse">
          <div class="panel-body">
           <div class="container-fluid">
            <div class="row">
             <impressum></impressum>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div   class="col-md-12 well well-lg" id="container-footer">
      <h4>{{brandinfo.brand_name}}</h4>
      <h5  ng-bind-html="brandinfo.brandDescriptionFooter"></h5>
     </div>
    </div>
   </div>





   <div class="col-md-4 text-center" id="sidebar">
    <div>
     <a id="modal-1" href="#modal-container-1" role="button" class="btn btn-warning btn-block" data-toggle="modal">
      <button type="button" class="btn btn-warning btn-block">
       <i class="fa fa-arrow-circle-right"></i> Termine &amp; Anmeldung
      </button>
     </a>


     <div class="tabbable" id="tabs-sidebar">
      <div class="tab-content">       

       <div class="tab-pane active" id="panel-brand-sidebar" role="tabpanel">
        <h3 class="text-center">
         <i class="fa fa-calendar-check-o"></i> Aktuelle Termine
        </h3> 

         
        <p>#Die nächsten 5 Kurse</p>
        <right-bar-course-all ng-repeat="e in nextEvents|limitTo:5"></right-bar-course-all>        
                
       </div>

       
       <div ng-repeat="tsb in topics"  class="tab-pane" id="panel-{{tsb.topic_name}}-sidebar" role="tabpanel">
        <right-bar-course-by-topic ng-repeat="sbc in tsb.sideBarCourses"></right-bar-course-by-topic>
       </div>    
      
     </div>
    </div>

    <div class="alert alert-info">
    </div>
   </div>
  </div>





 <div class="modal fade" id="modal-container-1" role="dialog" >
   <div class="modal-dialog">
     <div class="modal-content ">

       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X </button>

       <div> <!-- afterbutton -->


         <div class="modal-body" class="col-md-12">

           <h2>Termine und Anmeldung</h2>

           <div class="col-md-9">

             <form>
               <div class="input-group">
                 <div class="input-group-addon"><i class="fa fa-search"></i></div>
                 <input type="text" class="form-control" placeholder="search in table" ng-model="tablesearch">
               </div> 
             </form>



            <table class="table table-responsive table-hover table-striped" style="width: 98%;">
            <thead>
                <th><a href="#"><h4>Auswahl</h4></a></th>
                <th><a href="#" ng-click="sortType = 'eventguaranteestatus'; sortReverse = !sortReverse"><h4>Status</h4>
                 <span ng-show="sortType == 'eventguaranteestatus' && !sortReverse" class="fa fa-caret-down"></span>
                 <span ng-show="sortType == 'eventguaranteestatus' && sortReverse" class="fa fa-caret-up"></span>
                </a></th>
                <th><a href="#" ng-click="sortType = 'start_date'; sortReverse = !sortReverse"><h4>von - bis</h4>
                 <span ng-show="sortType == 'start_date' && !sortReverse" class="fa fa-caret-down"></span>
                 <span ng-show="sortType == 'start_date' && sortReverse" class="fa fa-caret-up"></span>
                </a></th>                
                <th><a href="#" ng-click="sortType = 'namefortable'; sortReverse = !sortReverse"><h4>Name</h4>
                 <span ng-show="sortType == 'namefortable' && !sortReverse" class="fa fa-caret-down"></span>
                 <span ng-show="sortType == 'namefortable' && sortReverse" class="fa fa-caret-up"></span>
                </a></th>                
                <th><a href="#" ng-click="sortType = 'location_name'; sortReverse = !sortReverse"><h4>Ort</h4>
                 <span ng-show="sortType == 'location_name' && !sortReverse" class="fa fa-caret-down"></span>
                 <span ng-show="sortType == 'location_name' && sortReverse" class="fa fa-caret-up"></span>
                </a></th>                
                <th><a href="#" ng-click="sortType = 'trainer'; sortReverse = !sortReverse"><h4>Trainer</h4>
                 <span ng-show="sortType == 'trainer' && !sortReverse" class="fa fa-caret-down"></span>
                 <span ng-show="sortType == 'trainer' && sortReverse" class="fa fa-caret-up"></span>
                </a></th>
                <th><a href="#" ng-click="sortType = 'price'; sortReverse = !sortReverse"><h4>Preis</h4>
                 <span ng-show="sortType == 'price' && !sortReverse" class="fa fa-caret-down"></span>
                 <span ng-show="sortType == 'price' && sortReverse" class="fa fa-caret-up"></span>
                </a></th>
                <th><a href="#" ng-click="sortType = 'price'; sortReverse = !sortReverse"><h4>MwSt.</h4>
                 <span ng-show="sortType == 'price' && !sortReverse" class="fa fa-caret-down"></span>
                 <span ng-show="sortType == 'price' && sortReverse" class="fa fa-caret-up"></span>
                </a></th>
              </thead>
              <tbody>
                <tr ng-repeat="xelem in xlist | orderBy:sortType:sortReverse | filter:tablesearch">
                  <td><input type="checkbox" class="checkbox" type="checkbox" ng-model="xelem.checked" name="userAgree" ng-change="reservationlistupdate(xelem)"></td>
                  <td>{{xelem.eventguaranteestatus}}</td>               
                  <td>{{xelem.start_date}} - {{xelem.finish_date}}</td>
                  <td>{{xelem.namefortable}}</td>
                  <td>{{xelem.location_name}}</td>
                  <td>{{xelem.trainer}}</td>
                  <td>{{xelem.price}},-</td>               
                  <td>{{Math.round(xelem.price*0.19)}},-</td>               
                </tr>
              </tbody>
          </table>



            


           </div><!-- end md9 (table) -->


           <div class="col-md-3">
             <form>
               <div class="form-group">
                 <div class="input-group">

                       <h4>Ansprechpartner</h4>
                   <div class="col-md-12" >

                     <div class="col-md-6">
                       <input type="text" class="form-control" placeholder="Vorname" ng-model="rinfo.contactname">
                     </div>

                     <div class="col-md-6">
                       <input type="text" class="form-control" placeholder="Nachname" required="" ng-model="rinfo.contactsname">
                     </div>
                   </div>
                   <div class="col-md-12">
                   <div  style="margin-top: 5px;">
                       <h4>Kontakt</h4>
                   </div>

                     <div class="col-md-6">
                       <input type="text" class="form-control" placeholder="Firma" ng-model="rinfo.organisation">
                     </div>

                     <div class="col-md-6">
                       <input type="email" required="" class="form-control" type="text" placeholder="E-MaiL" ng-model="rinfo.contactpersonemail">
                     </div>
                   </div>

                     <div class="col-md-12" style="margin-top: 5px;">
                       <button class="btn btn-success btn-sm" ng-click="addInput()">+ Person</button>
                     </div>
                   <div class="col-md-12" ng-repeat="reserveparticipant in reserveparticipants">

                     <div class="col-md-12">
                     <div class="col-md-12"  style="margin-top: 2px;">
                      <button class="btn btn-default btn-xs" ng-click="removeInput($index)">Teilnehmer entfernen</button>
                     </div>
                      <div class="col-md-8">
                       <input class="form-control" type="text" placeholder="Vorname" ng-model="reserveparticipant.name">
                      </div>
                      <div class="col-md-8">
                       <input class="form-control" type="text" placeholder="Nachname" required="" ng-model="reserveparticipant.sname">
                      </div>
                     </div>

                     <div class="col-md-12">
                      <div class="col-md-8">
                       <input type="email" required="" class="form-control" type="text" placeholder="E-MaiL" ng-model="reserveparticipant.email">
                      </div>
                      <div class="col-md-10">
                       <input type="checkbox" ng-model="reserveparticipant.certificate"> Anmeldung zur Prüfung</input> 
                      </div>
                     </div>

                     </div>
                   </div>
                    <div class="col-md-12" style="margin-top: 5px;">
                       <button class="btn btn-success btn-sm" ng-click="addInput()">+ Person</button>
                     </div>
                      <p>.</p>
                    <h4>Anschrift </h4>                     
                   <div class="col-md-12">
                       
                     <div class="col-md-8">
                       <input type="text" class="form-control" placeholder="Straße" ng-model="rinfo.street">
                     </div>

                     <div class="col-md-3">
                       <input type="text" class="form-control" placeholder="Nr." ng-model="rinfo.housenr">
                     </div>
                   </div>

                   <div class="col-md-12">
                     <div class="col-md-6">
                       <input type="text" class="form-control" placeholder="PLZ" ng-model="rinfo.zip">
                     </div>

                     <div class="col-md-6">
                       <input type="text" class="form-control" placeholder="Ort" ng-model="rinfo.city">
                     </div>
                   </div>

                 </div>
               </div>
              </form>
              <div class="row" style="margin-top: 15px;" ng-if="rinfo.courses.length>0">
                <h4>Ausgewählte Events:</h4>
                <h5 ng-repeat="picked in rinfo.courses track by $index" style="color:#333">
                  <b>-Nr.: {{picked.event_id}}:</b> {{picked.start_date}} - {{picked.course_name}}</h5>
             </div>
           </div>



         </div><!-- end registerform -->



       </div> <!-- end afterbutton -->


        <div class="modal-footer">

        <button type="button" class="btn btn-danger" data-dismiss="modal">
         schließen</button>


         <a id="modal-2" href="#modal-container-2" data-toggle="modal">

         <button type="button" class="btn btn-success" ng-click="reservate()">

          <i class="fa fa-arrow-circle-right"></i> Anmeldung
         </button>
     </a>

        </div>
     </div> <!-- end modal-content -->
   </div> <!-- end modal-dialog-->
 </div> <!-- modal fade -->




<div class="modal fade" id="modal-container-2" role="dialog" class="col-md-4" >
   <div class="modal-dialog">
     <div class="modal-content ">

       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X </button>

       <div> <!-- afterbutton -->
         <div class="modal-body" >
           <h2>Anmeldung erfolgt.</h2> {{rinfo}}     
         </div><!-- end registerform -->
       </div> <!-- end afterbutton -->


        <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">
         schließen</button>
         <button type="button" class="btn btn-success" ng-click="reservate()">
          <i class="fa fa-arrow-circle-right"></i> Anmeldung
         </button>

        </div>
     </div> <!-- end modal-content -->
   </div> <!-- end modal-dialog-->
 </div> <!-- modal fade -->



  <div class="row">
   <!----external footer-->
   <div class="col-md-12" id="footer">
    <div class="well well-lg well_darkgrey">
     verwendete scripte: 
     <a href="http://getbootstrap.com">Bootstrap v3.3.6</a>
     <a href="http://angularjs.org">AngularJS v1.4.9</a>
     <a href="https://jquery.com/download/">jQuery 2.2.1</a>
    </div>
   </div>
  </div>


 </div>
